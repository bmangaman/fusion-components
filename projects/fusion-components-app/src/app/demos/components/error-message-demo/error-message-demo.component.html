<fusion-demo titleText="Select">

  @if (errorMessageForm) {
    <form form class="fusion-components-demo__form f-form" [formGroup]="errorMessageForm">
      <!-- START: has errors checkbox -->
      <f-checkbox formControlName="hasErrors">Has Errors</f-checkbox>
      <!-- END: has errors checkbox -->
      <!-- START: display multiple checkbox -->
      <f-checkbox formControlName="displayMultiple">Display Multiple</f-checkbox>
      <!-- END: display multiple checkbox -->
    </form>
  }

  <ng-container result>

    <form class="f-form">
      <div class="f-form__fieldset">
        <label class="f-form__label" for="test-input">Test Input Label</label>
        <input [formControl]="errorMessageFormControl" class="f-form__input" type="text" fusionUiValidationStyling />
        <f-error-message
          [control]="errorMessageFormControl"
          [errors]="errorMessageForm.get('hasErrors')?.value ? errorMessages : []"
          [displayMultiple]="errorMessageForm.get('displayMultiple')?.value">
        </f-error-message>
      </div>
    </form>

    <h3 class="f-h3">Possible Error Messages</h3>
    @if (errorMessageForm.get('hasErrors')?.value) {
      @for (message of errorMessages; track message) {
        <div>{{ message?.priority }} : {{ message?.error }}</div>
      }
    }
    <br />
    <div>NOTE: To get multiple errors to show up, check the "Display Multiple" checkbox and input a number (like 8).</div>

  </ng-container>

</fusion-demo>
