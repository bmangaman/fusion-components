<button
  [disabled]="isButtonDisabled"
  [attr.aria-disabled]="isButtonDisabled"
  [attr.aria-label]="aria?.label || ''"
  [attr.aria-haspopup]="!!aria?.haspopup || null"
  [attr.aria-controls]="aria?.controls || ''"
  [attr.aria-expanded]="!!aria?.expanded || null"
  [attr.type]="inputType"
  (click)="buttonClicked()"
  [fusionUiAutofocus]="isAutofocused"
  [ngClass]="buttonClasses">

  <ng-container *ngIf="state === State.LOADED; else loading">
    <div class="f-button__content" #buttonContent>
      <i
        class="f-button__icon mdi {{ icon }}"
        *ngIf="icon"
        [attr.aria-hidden]="!!text"
        [attr.aria-label]="aria?.iconAriaLabel || ''"></i>
      <span class="f-button__text" *ngIf="text">{{ text }}</span>
      <i
        class="f-button__icon mdi mdi-chevron-down"
        *ngIf="opensMenu"
        [attr.aria-hidden]="!!text"
        [attr.aria-label]="aria?.menuIconAriaLabel || ''"></i>
    </div>
  </ng-container>

  <ng-template #loading>
    <f-loading-spinner
      [size]="loadingSpinnerSize"
      [opacity]="0.2"
      [minWidth]="contentMinWidth"
      [ariaLabel]="aria?.loadingSpinner || ''">
    </f-loading-spinner>
  </ng-template>

</button>
